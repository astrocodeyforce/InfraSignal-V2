[% FILTER collapse ~%]
[%~ IF unresponsive.ALL ~%]
    [% PROCESS 'report/new/unresponsive_body.html' body_id = unresponsive.ALL %]
[%~ ELSIF bodies_to_list.size == 0 ~%]
    <div class="box-warning">[% PROCESS 'report/new/top_message_none.html' %]</div>
[%~ ELSIF bodies_to_list.size != bodies.size ~%]
    [%# InfraSignal: When a city body is the primary handler, show a helpful
        message instead of a confusing "missing details" warning. The city is
        the responsible local government — state/county are just lower-priority
        fallbacks, not "missing" bodies. ~%]
    [% SET primary_bodies = [] %]
    [% FOREACH bid IN bodies_to_list.keys %]
        [% primary_bodies.push(bodies_to_list.$bid.name) %]
    [% END %]
    <div class="box-info" style="background: #e8f5e9; border-left: 4px solid #4caf50; padding: 12px 16px; margin-bottom: 16px;">
        <p style="margin: 0;">
            <strong>Your report will be sent to [% primary_bodies.join(', ') %]</strong> — your local government responsible for this area.
        </p>
    </div>
[%~ END ~%]
[%~ END ~%]
